@model hamalba.Models.Oglas

@using Microsoft.AspNetCore.Identity
@inject UserManager<hamalba.Models.Korisnik> UserManager

@{
    var currentUserId = UserManager.GetUserId(User);
    var isOwner = currentUserId == Model.UserId;
}

<h2>Detalji oglasa</h2>

<table class="table">
    <tr>
        <th>Naslov</th>
        <td>@Model.Naslov</td>
    </tr>
    <tr>
        <th>Opis</th>
        <td>@Model.Opis</td>
    </tr>
    <tr>
        <th>Datum objave</th>
        <td>@Model.Datum.ToString("dd.MM.yyyy")</td>
    </tr>
    <tr>
        <th>Rok</th>
        <td>@Model.Rok.ToString("dd.MM.yyyy")</td>
    </tr>
    <tr>
        <th>Cijena</th>
        <td>@Model.Cijena.ToString("N2")</td>
    </tr>
    <tr>
        <th>Lokacija</th>
        <td>@Model.Lokacija</td>
    </tr>
    <tr>
        <th>Status</th>
        <td>@Model.Status.ToString()</td>
    </tr>
    <tr>
        <th>Kontakt</th>
        <td>@Model.Kontakt</td>
    </tr>
    <tr>
        <th>Objavio</th>
        <td>@Model.User?.UserName</td>
    </tr>
</table>

<a asp-action="SviOglasi" class="btn btn-secondary">Nazad na oglase</a>

@if (isOwner)
{
    <a asp-action="PregledKandidata" asp-route-id="@Model.OglasId" class="btn btn-info mt-3">Pregled kandidata</a>

    @if (Model.Status == OglasStatus.InProces)
    {
        <form asp-action="OznaciKaoObavljen" method="post" style="display:inline; margin-left: 10px;">
            <input type="hidden" name="oglasId" value="@Model.OglasId" />
            @Html.AntiForgeryToken()
            <button type="submit" class="btn btn-success">Označi posao kao obavljen</button>
        </form>
    }
}